apply plugin: 'com.github.hauner.jarTest'
apply plugin: 'eclipse'

eclipse.project.natures 'org.eclipse.pde.PluginNature'

sourceSets.test {
	java.srcDirs = ['src']
	resources.srcDirs = ['dat']
}

dependencies {
	testCompile(
		'junit:junit:4.11',
		'org.apache.ant:ant:1.8.2',
		'org.eclipse.core:org.eclipse.core.runtime:3.10.0.v20140318-2214',
		'org.hamcrest:hamcrest-core:1.3',
		'org.osgi:org.osgi.core:4.2.0',
		project(':com.ibm.wala.core'),
		project(':com.ibm.wala.shrike'),
		project(':com.ibm.wala.util'),
		)
}

test {
	// TODO: figure out why this seems to run forever
	exclude '**/CallGraphTest.class'

	// https://github.com/liblit/WALA/issues/5
	exclude '**/AcyclicCallGraphTest.class'
	exclude '**/AnnotationTest.class'
	exclude '**/ArrayboundsAnalysisTest.class'
	exclude '**/CFGTest.class'
	exclude '**/CHACallGraphTest.class'
	exclude '**/ClassConstantTest.class'
	exclude '**/CloneTest.class'
	exclude '**/CodeDeletedTest.class'
	exclude '**/ContextSensitiveTest.class'
	exclude '**/CornerCasesTest.class'
	exclude '**/CPATest.class'
	exclude '**/DataflowTest.class'
	exclude '**/DebuggingBitsetCallGraphTest.class'
	exclude '**/DefaultMethodsTest.class'
	exclude '**/DeterministicIRTest.class'
	exclude '**/DupFieldsTest.class'
	exclude '**/DynamicCallGraphTest.class'
	exclude '**/ExceptionAnalysis2EdgeFilterTest.class'
	exclude '**/ExceptionAnalysisTest.class'
	exclude '**/ExclusionsTest.class'
	exclude '**/FinalizerTest.class'
	exclude '**/GetTargetsTest.class'
	exclude '**/InnerClassesTest.class'
	exclude '**/InterfaceTest.class'
	exclude '**/IntraprocTest.class'
	exclude '**/Java7CallGraphTest.class'
	exclude '**/LambdaTest.class'
	exclude '**/LibraryVersionTest.class'
	exclude '**/LocalNamesTest.class'
	exclude '**/MultiDimArrayTest.class'
	exclude '**/MultiNewArrayTest.class'
	exclude '**/NoRefinePtrTest.class'
	exclude '**/NullPointerExceptionInterTest.class'
	exclude '**/NullPointerExceptionIntraTest.class'
	exclude '**/OnTheFlyPtrTest.class'
	exclude '**/PiNodeCallGraphTest.class'
	exclude '**/PruneArrayOutOfBoundExceptionEdge.class'
	exclude '**/RefineFieldsPtrTest.class'
	exclude '**/ReflectionTest.class'
	exclude '**/SlicerTest.class'
	exclude '**/SourceMapTest.class'
	exclude '**/SyntheticTest.class'
	exclude '**/TunedRefinementTest.class'
	exclude '**/TypeAnnotationTest.class'
	exclude '**/TypeBasedArrayAliasTest.class'
	exclude '**/TypeInferenceTest.class'
	exclude '**/ZeroLengthArrayTest.class'
}
